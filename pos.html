<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hotel POS</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
  <!-- Navbar -->
  <nav class="bg-blue-600 p-4 flex justify-between text-white">
    <div class="text-xl font-bold">Hotel POS</div>
    <div class="space-x-4">
      <a href="hotelBooking.html" class="hover:underline">Booking</a>
      <a href="pos.html" class="hover:underline">POS</a>
      <a href="index.html" class="hover:underline">Exit</a>
    </div>
  </nav>

  <!-- POS Container -->
  <div class="p-4 grid grid-cols-1 md:grid-cols-4 gap-4">
    <!-- Categories & Items -->
    <div class="md:col-span-3">
      <h2 class="text-2xl font-semibold mb-2">Menu</h2>
      <div id="categories" class="grid grid-cols-2 gap-4"></div>
    </div>

    <!-- Cart Section -->
    <div class="bg-white shadow p-4 rounded">
      <h3 class="text-xl font-bold mb-2">Cart</h3>
      <ul id="cart" class="mb-4 space-y-2"></ul>
      <p class="font-bold">Total: £<span id="total">0.00</span></p>
      <button onclick="checkout()" class="mt-4 w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">Checkout</button>
    </div>
  </div>

  <!-- Modals Container -->
  <div id="modals"></div>

  <script>
    const items = {
      'Hot Drinks': [
        { name: 'Coffee', price: 2.5 },
        { name: 'Tea', price: 2.5 },
        { name: 'Hot Chocolate', price: 3.0 }
      ],
      'Snacks': [
        { name: 'Cereal Bars', price: 1.5 },
        { name: 'Muffin', price: 1.0 },
        { name: 'Cookie', price: 0.75 },
        { name: 'Croissant', price: 0.75 },
        { name: 'Donut', price: 1.0 }
      ],
      'Soft Drinks': [
        { name: 'Coke Zero', price: 1.5 },
        { name: 'Sprite', price: 1.5 },
        { name: 'Fanta', price: 1.5 },
        { name: 'Iced Tea', price: 1.5 }
      ]
    };

    const cart = [];

    function renderCategories() {
      const container = document.getElementById('categories');
      container.innerHTML = '';
      for (const category in items) {
        const box = document.createElement('div');
        box.className = 'bg-white p-4 shadow rounded';
        const title = document.createElement('h3');
        title.textContent = category;
        title.className = 'text-lg font-semibold mb-2';

        items[category].forEach(item => {
          const btn = document.createElement('button');
          btn.className = 'block w-full text-left hover:bg-blue-100 px-2 py-1 rounded';
          btn.textContent = `${item.name} - £${item.price.toFixed(2)}`;
          btn.onclick = () => addToCart(item);
          box.appendChild(btn);
        });

        box.prepend(title);
        container.appendChild(box);
      }
    }

    function addToCart(item) {
      cart.push(item);
      renderCart();
    }

    function renderCart() {
      const cartList = document.getElementById('cart');
      const totalSpan = document.getElementById('total');
      cartList.innerHTML = '';
      let total = 0;
      cart.forEach((item, index) => {
        total += item.price;
        const li = document.createElement('li');
        li.className = 'flex justify-between';
        li.innerHTML = `${item.name} <span>£${item.price.toFixed(2)}</span>`;
        cartList.appendChild(li);
      });
      totalSpan.textContent = total.toFixed(2);
    }

    function checkout() {
      const total = cart.reduce((sum, item) => sum + item.price, 0);
      if (total === 0) return;

      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center';

      modal.innerHTML = `
        <div class="bg-white p-6 rounded shadow w-96">
          <h2 class="text-xl font-bold mb-4">Choose Payment Method</h2>
          <button class="w-full bg-green-500 hover:bg-green-600 text-white py-2 rounded mb-2" onclick="payCash(${total}); this.closest('.fixed').remove()">Cash</button>
          <button class="w-full bg-blue-500 hover:bg-blue-600 text-white py-2 rounded mb-2" onclick="payCard(${total}); this.closest('.fixed').remove()">Card</button>
          <button class="w-full bg-yellow-500 hover:bg-yellow-600 text-white py-2 rounded" onclick="payRoom(${total}); this.closest('.fixed').remove()">Charge to Room</button>
        </div>
      `;

      document.getElementById('modals').appendChild(modal);
    }

    function payCash(total) {
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center';

      modal.innerHTML = `
        <div class="bg-white p-6 rounded shadow w-96">
          <h2 class="text-xl font-bold mb-4">Cash Payment</h2>
          <p>Total: £${total.toFixed(2)}</p>
          <input type="number" placeholder="Amount Given" class="w-full border p-2 my-2" id="cashGiven" />
          <button class="w-full bg-green-600 text-white py-2 rounded" onclick="confirmCash(${total})">Confirm</button>
        </div>
      `;

      document.getElementById('modals').appendChild(modal);
    }

    function confirmCash(total) {
      const given = parseFloat(document.getElementById('cashGiven').value);
      if (isNaN(given) || given < total) {
        alert('Not enough cash given');
        return;
      }
      const change = given - total;
      alert(`Transaction successful. Change: £${change.toFixed(2)}`);
      cart.length = 0;
      renderCart();
      document.getElementById('modals').innerHTML = '';
    }

    function payCard(total) {
      const confirmed = confirm(`Card transaction of £${total.toFixed(2)} successful?`);
      if (confirmed) {
        alert('Card payment completed');
        cart.length = 0;
        renderCart();
      }
    }

    function payRoom(total) {
      const checkedInRooms = JSON.parse(localStorage.getItem('checkedInGuests') || '[]');
      const roomOptions = checkedInRooms.map(g => `<option value="${g.room}">${g.name} - Room ${g.room}</option>`).join('');

      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center';

      modal.innerHTML = `
        <div class="bg-white p-6 rounded shadow w-96">
          <h2 class="text-xl font-bold mb-4">Charge to Room</h2>
          <label>Select Room:</label>
          <select id="roomSelect" class="w-full border p-2 my-2">${roomOptions}</select>
          <button class="w-full bg-yellow-600 text-white py-2 rounded" onclick="confirmRoomCharge(${total})">Confirm Charge</button>
        </div>
      `;

      document.getElementById('modals').appendChild(modal);
    }

    function confirmRoomCharge(total) {
      const selectedRoom = document.getElementById('roomSelect').value;
      if (!selectedRoom) return;
      alert(`Charged £${total.toFixed(2)} to Room ${selectedRoom}`);
      cart.length = 0;
      renderCart();
      document.getElementById('modals').innerHTML = '';
    }

    renderCategories();
  </script>
</body>
</html>

