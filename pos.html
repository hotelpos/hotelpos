<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hotel POS</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script defer src="https://unpkg.com/@popperjs/core@2"></script>
</head>
<body class="bg-gray-100 text-gray-800">
  <!-- Navbar -->
  <nav class="bg-blue-600 text-white p-4 flex justify-between">
    <div class="text-xl font-bold">POS System</div>
    <div class="space-x-4">
      <a href="hotelBooking.html" class="hover:underline">Booking</a>
      <a href="pos.html" class="hover:underline font-semibold">POS</a>
      <a href="index.html" class="hover:underline">Exit</a>
    </div>
  </nav>

  <!-- POS Main Section -->
  <div class="max-w-6xl mx-auto p-6">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Categories and Items -->
      <div>
        <h2 class="text-lg font-bold mb-2">Menu</h2>
        <div class="space-y-4">
          <div>
            <h3 class="font-semibold">Food</h3>
            <div class="grid grid-cols-2 gap-2">
              <button class="item-btn" data-name="Burger" data-price="10">Burger - $10</button>
              <button class="item-btn" data-name="Pasta" data-price="12">Pasta - $12</button>
            </div>
          </div>
          <div>
            <h3 class="font-semibold">Drinks</h3>
            <div class="grid grid-cols-2 gap-2">
              <button class="item-btn" data-name="Coffee" data-price="4">Coffee - $4</button>
              <button class="item-btn" data-name="Juice" data-price="5">Juice - $5</button>
            </div>
          </div>
          <div>
            <h3 class="font-semibold">Services</h3>
            <div class="grid grid-cols-2 gap-2">
              <button class="item-btn" data-name="Laundry" data-price="15">Laundry - $15</button>
              <button class="item-btn" data-name="Spa" data-price="30">Spa - $30</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Custom Charge -->
      <div>
        <h2 class="text-lg font-bold mb-2">Add Custom Charge</h2>
        <input id="custom-desc" class="border p-2 w-full mb-2" placeholder="Description">
        <input id="custom-amount" type="number" class="border p-2 w-full mb-2" placeholder="Amount">
        <button onclick="addCustomItem()" class="bg-blue-600 text-white px-4 py-2 rounded">Add</button>
      </div>

      <!-- Cart -->
      <div>
        <h2 class="text-lg font-bold mb-2">Cart</h2>
        <ul id="cart-list" class="border p-2 h-64 overflow-y-auto mb-2"></ul>
        <p class="font-semibold mb-2">Total: $<span id="total">0</span></p>
        <button onclick="checkout()" class="bg-green-600 text-white px-4 py-2 rounded w-full">Checkout</button>
      </div>
    </div>
  </div>

  <!-- Checkout Modal -->
  <div id="checkout-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white p-6 rounded w-96 space-y-4">
      <h2 class="text-xl font-bold">Complete Payment</h2>
      <label class="block mb-1">Payment Method</label>
      <select id="payment-method" class="border p-2 w-full">
        <option value="cash">Cash</option>
        <option value="card">Card</option>
        <option value="room">Charge to Room</option>
      </select>

      <div id="room-selector" class="hidden mt-2">
        <label class="block mb-1">Select Room</label>
        <select id="room-number" class="border p-2 w-full">
          <!-- Room options loaded dynamically -->
        </select>
      </div>

      <div class="flex justify-end space-x-2">
        <button onclick="confirmCheckout()" class="bg-green-600 text-white px-4 py-2 rounded">Confirm</button>
        <button onclick="closeModal()" class="bg-gray-400 text-white px-4 py-2 rounded">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    const cart = [];

    document.querySelectorAll('.item-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        cart.push({ name: btn.dataset.name, price: parseFloat(btn.dataset.price) });
        renderCart();
      });
    });

    function addCustomItem() {
      const desc = document.getElementById('custom-desc').value;
      const amount = parseFloat(document.getElementById('custom-amount').value);
      if (desc && !isNaN(amount)) {
        cart.push({ name: desc, price: amount });
        renderCart();
        document.getElementById('custom-desc').value = '';
        document.getElementById('custom-amount').value = '';
      }
    }

    function renderCart() {
      const list = document.getElementById('cart-list');
      list.innerHTML = '';
      let total = 0;
      cart.forEach((item, i) => {
        total += item.price;
        const li = document.createElement('li');
        li.textContent = `${item.name} - $${item.price.toFixed(2)}`;
        list.appendChild(li);
      });
      document.getElementById('total').textContent = total.toFixed(2);
    }

    function checkout() {
      document.getElementById('checkout-modal').classList.remove('hidden');
      const roomDropdown = document.getElementById('room-number');
      roomDropdown.innerHTML = '';
      const rooms = JSON.parse(localStorage.getItem('hotelRooms') || '[]');
      rooms.forEach(r => {
        const option = document.createElement('option');
        option.value = r.number;
        option.textContent = `Room ${r.number}`;
        roomDropdown.appendChild(option);
      });
    }

    function confirmCheckout() {
      const method = document.getElementById('payment-method').value;
      if (method === 'room') {
        const room = document.getElementById('room-number').value;
        const current = JSON.parse(localStorage.getItem(`charges-${room}`) || '[]');
        cart.forEach(item => current.push(item));
        localStorage.setItem(`charges-${room}`, JSON.stringify(current));
      }
      cart.length = 0;
      renderCart();
      closeModal();
    }

    function closeModal() {
      document.getElementById('checkout-modal').classList.add('hidden');
    }

    document.getElementById('payment-method').addEventListener('change', e => {
      document.getElementById('room-selector').classList.toggle('hidden', e.target.value !== 'room');
    });
  </script>
</body>
</html>
