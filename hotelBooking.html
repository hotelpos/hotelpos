<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Booking</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Basic reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: #f8f9fa;
            color: #495057;
        }

        /* Navbar */
        .navbar {
            background-color: #007bff;
        }

        .navbar-brand {
            color: white !important;
            font-weight: bold;
        }

        /* Header */
        h3 {
            color: #007bff;
        }

        .container {
            max-width: 900px;
            margin-top: 20px;
        }

        /* Buttons */
        .btn-custom {
            border-radius: 50px;
            padding: 10px 25px;
        }

        .btn-primary {
            background-color: #007bff;
            border: none;
        }

        .btn-danger {
            background-color: #dc3545;
            border: none;
        }

        .btn-warning {
            background-color: #ffc107;
            border: none;
        }

        /* Modal Styling */
        .modal-content {
            border-radius: 12px;
        }

        .modal-header {
            background-color: #007bff;
            color: white;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer button {
            border-radius: 50px;
        }

        .room-table td,
        .room-table th {
            padding: 15px;
        }

        /* Breakdowns & Notifications */
        .notification {
            padding: 20px;
            background-color: #28a745;
            color: white;
            border-radius: 5px;
            margin-top: 20px;
            display: none;
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Hotel System</a>
            <a href="pos.html" class="btn btn-warning mx-2">POS</a>
            <a href="index.html" class="btn btn-danger mx-2">Logout</a>
        </div>
    </nav>

    <!-- Date Selector -->
    <div class="container mt-4">
        <label for="dateSelector">Select Date:</label>
        <input type="date" class="form-control" id="dateSelector">
    </div>

    <!-- Available Rooms -->
    <div class="container mt-5">
        <h3>Available Rooms</h3>
        <table class="table table-striped room-table">
            <thead>
                <tr>
                    <th scope="col">Room</th>
                    <th scope="col">Status</th>
                    <th scope="col">Action</th>
                </tr>
            </thead>
            <tbody id="roomBody">
                <!-- Room data will populate dynamically -->
            </tbody>
        </table>

        <!-- Create Booking Button -->
        <button class="btn btn-primary btn-custom" data-bs-toggle="modal" data-bs-target="#createBookingModal">Create New Booking</button>
    </div>

    <!-- Modal to Create New Booking -->
    <div class="modal fade" id="createBookingModal" tabindex="-1" aria-labelledby="createBookingModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createBookingModalLabel">Create Booking</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="bookingForm">
                        <div class="mb-3">
                            <label for="guestName" class="form-label">Guest Name</label>
                            <input type="text" class="form-control" id="guestName" required>
                        </div>
                        <div class="mb-3">
                            <label for="arrivalDate" class="form-label">Arrival Date</label>
                            <input type="date" class="form-control" id="arrivalDate" required>
                        </div>
                        <div class="mb-3">
                            <label for="departureDate" class="form-label">Departure Date</label>
                            <input type="date" class="form-control" id="departureDate" required>
                        </div>
                        <div class="mb-3">
                            <label for="roomNumber" class="form-label">Select Room</label>
                            <select class="form-control" id="roomNumber" required>
                                <!-- Available rooms will populate here -->
                            </select>
                        </div>
                        <button type="button" class="btn btn-warning btn-custom" id="findRoomBtn">Find Available Room</button>
                        <div class="mb-3 mt-3">
                            <label for="tab" class="form-label">Add Tab (£50 Deposit)</label>
                            <input type="checkbox" id="tab"> Add £50 deposit
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="confirmBookingBtn">Confirm Booking</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Check-In Popup -->
    <div class="modal fade" id="checkInModal" tabindex="-1" aria-labelledby="checkInModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="checkInModalLabel">Check-In Room</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Is the room clean?</p>
                    <button type="button" class="btn btn-success" id="confirmCheckInBtn">Yes, Check-In</button>
                    <button type="button" class="btn btn-danger" id="denyCheckInBtn">No, Room Not Clean</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Breakdown Notification -->
    <div class="notification" id="notification">
        <p><strong>Booking confirmed!</strong></p>
        <p>Details are saved and a £50 deposit was added to the tab.</p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
    <script>
        let bookings = [];
        let availableRooms = ["101", "102", "103", "104", "105", "106"];
        let roomStatus = {
            "101": "Clean",
            "102": "Clean",
            "103": "Clean",
            "104": "Clean",
            "105": "Clean",
            "106": "Clean"
        };

        // Populate available rooms in the form
        function populateRoomOptions() {
            const roomSelect = document.getElementById('roomNumber');
            roomSelect.innerHTML = '';
            availableRooms.forEach(room => {
                let option = document.createElement('option');
                option.value = room;
                option.innerText = `Room ${room}`;
                roomSelect.appendChild(option);
            });
        }

        // Display bookings in table
        function displayBookings() {
            const roomBody = document.getElementById('roomBody');
            roomBody.innerHTML = '';
            bookings.forEach((booking, index) => {
                let row = roomBody.insertRow();
                row.innerHTML = `
                    <td>${booking.roomNumber}</td>
                    <td><span class="badge badge-${roomStatus[booking.roomNumber] === 'Clean' ? 'success' : 'warning'}">${roomStatus[booking.roomNumber]}</span></td>
                    <td>
                        <button class="btn btn-primary btn-custom" onclick="showBreakdown(${index})">Action</button>
                    </td>
                `;
            });
        }

        // Show booking breakdown in modal
        function showBreakdown(index) {
            const booking = bookings[index];
            alert(`Booking breakdown:\nGuest Name: ${booking.guestName}\nRoom Number: ${booking.roomNumber}\nArrival Date: ${booking.arrivalDate}\nDeparture Date: ${booking.departureDate}\nDeposit: £50`);
        }

        // Confirm booking
        document.getElementById('confirmBookingBtn').addEventListener('click', function () {
            const guestName = document.getElementById('guestName').value;
            const arrivalDate = document.getElementById('arrivalDate').value;
            const departureDate = document.getElementById('departureDate').value;
            const roomNumber = document.getElementById('roomNumber').value;
            const tab = document.getElementById('tab').checked;

            if (!guestName || !arrivalDate || !departureDate || !roomNumber) {
                alert("Please fill in all fields.");
                return;
            }

            const booking = { guestName, arrivalDate, departureDate, roomNumber, tab };
            bookings.push(booking);
            displayBookings();

            // Close the booking form modal
            const bookingModal = new bootstrap.Modal(document.getElementById('createBookingModal'));
            bookingModal.hide();

            // Show confirmation notification
            const notification = document.getElementById('notification');
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        });

        // Find room and assign to booking form
        document.getElementById('findRoomBtn').addEventListener('click', function () {
            const availableRoom = availableRooms.find(room => roomStatus[room] === "Clean" && !bookings.some(b => b.roomNumber === room));
            if (availableRoom) {
                document.getElementById('roomNumber').value = availableRoom;
            } else {
                alert("No available rooms.");
            }
        });

        // Check-In functionality
        document.getElementById('confirmCheckInBtn').addEventListener('click', function () {
            const roomNumber = document.getElementById('roomNumber').value;
            if (roomStatus[roomNumber] === "Clean") {
                alert("Checked In!");
            } else {
                alert("Room is not clean. Cannot check in.");
            }
        });

        // Initialize the page
        populateRoomOptions();
        displayBookings();
    </script>
</body>

</html>
